{{- if .Values.registry.upstream.auth_secret.deploy }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ template "oci-registry.upstream_secret_name" . }}
  labels:
    {{- include "oci-registry.labels" . | nindent 4 }}
type: Opaque
data:
  username: {{ required "If registry.upstream.auth_secret.deploy is set to true, registry.upstream.auth_secret.username is required" .Values.registry.upstream.auth_secret.username | b64enc | quote }}
  password: {{ required "If registry.upstream.auth_secret.deploy is set to true, registry.upstream.auth_secret.password is required" .Values.registry.upstream.auth_secret.password | b64enc | quote }}
{{- end }}

